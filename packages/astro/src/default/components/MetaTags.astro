---
import type { MetaTagsConfig } from '@tutorialkit/types';
import { readFaviconFile } from '../utils/favicon';
import { readLogoFile } from '../utils/logo';
import { readPublicImage } from '../utils/publicImage';

interface Props {
  meta?: MetaTagsConfig;
}
const { meta = {} } = Astro.props;
const site = Astro.site?.toString();
let imageUrl;
if (meta.image) {
  imageUrl = readPublicImage(meta.image, site);
  if (!imageUrl) {
    console.warn(`Image ${meta.image} not found in "/public" folder`);
  }
}
imageUrl ??= readLogoFile('logo', site);
const faviconUrl = readFaviconFile('favicon', site);
---

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<meta name="generator" content={Astro.generator} />
{meta.description ? <meta name="description" content={meta.description} /> : null}
{meta.title ? <title>{meta.title}</title> : null}
{faviconUrl ? <link rel="icon" type="image/svg+xml" href={faviconUrl} /> : null}
{/* open graph */}
{meta.title ? <meta name="og:title" content={meta.title} /> : null}
{meta.description ? <meta name="og:description" content={meta.description} /> : null}
{imageUrl ? <meta name="og:image" content={imageUrl} /> : null}
{/* twitter */}
{meta.title ? <meta name="twitter:title" content={meta.title} /> : null}
{meta.description ? <meta name="twitter:description" content={meta.description} /> : null}
{imageUrl ? <meta name="twitter:image" content={imageUrl} /> : null}
